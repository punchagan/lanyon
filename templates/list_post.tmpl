{#  -*- coding: utf-8 -*- #}
{% extends 'base.tmpl' %}

{% block content %}
    <article class="listpage">
        <header>
            <h1>{{ title|e }}</h1>
        </header>
        {% if posts %}
            {% for grouper, posts_ in posts|groupby('date.year')|reverse %}
                <h2>{{grouper}}</h2>
                <table class="post-list">
                    {% for post in posts_ %}
                        <tr class="post-list-item">
                            <td>
                                <time class="listdate" datetime="{{ post.formatted_date('webiso') }}"
                                      title="{{ post.formatted_date(date_format)|e }}">
                                    {{ post.formatted_date(date_format)|e }}
                                </time>
                            </td>
                            <td><a href="{{post.permalink()}}" class="listtitle">{{post.title()|e}}</a></td>
                        </tr>
                    {% endfor %}
                </table>
            {% endfor %}
        {% else %}
            <p>{{ messages("No posts found.") }}</p>
        {% endif %}
    </article>
{% endblock %}
